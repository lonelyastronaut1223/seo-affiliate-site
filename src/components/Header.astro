---
/**
 * Header Component
 * Internationalized version - detects language from URL and shows appropriate content
 */
import LanguageSwitcher from "./LanguageSwitcher.astro";

const currentPath = Astro.url.pathname;
const isGerman = currentPath.startsWith("/de");

// Navigation links
const links = isGerman
    ? {
          home: "/de/",
          // Guides
          beginners: "/de/ratgeber/beste-kamera-fuer-anfaenger-2026",
          travel: "/de/ratgeber/beste-reisekamera",
          vlog: "/de/ratgeber/beste-vlog-kamera",
          budget: "/de/ratgeber/beste-budget-kamera-unter-800",
          hybrid: "/de/ratgeber/beste-hybrid-kamera",
          fullFrame: "/de/ratgeber/beste-vollformat-fuer-video",
          action360: "/de/ratgeber/beste-action-360-kamera",
          // Lenses
          sonyLenses: "/de/objektive/beste-sony-e-mount-objektive",
          canonLenses: "/de/objektive/beste-canon-rf-objektive",
          fujiLenses: "/de/objektive/beste-fujifilm-x-mount-objektive",
          // Gear
          tripods: "/de/zubehoer/beste-stative",
          bags: "/de/zubehoer/beste-kamerataschen",
          sdCards: "/de/zubehoer/beste-sd-karten",
          // Other
          deals: "/de/angebote",
      }
    : {
          home: "/",
          // Guides
          beginners: "/guides/best-camera-for-beginners-2026",
          travel: "/guides/best-travel-camera",
          vlog: "/guides/best-vlog-camera",
          budget: "/guides/best-budget-camera-under-800",
          hybrid: "/guides/best-hybrid-camera",
          fullFrame: "/guides/best-full-frame-for-video",
          action360: "/guides/best-action-360-camera",
          // Lenses
          sonyLenses: "/lenses/best-sony-e-mount-lenses",
          canonLenses: "/lenses/best-canon-rf-lenses",
          fujiLenses: "/lenses/best-fujifilm-x-mount-lenses",
          // Gear
          tripods: "/gear/best-tripods",
          bags: "/gear/best-camera-bags",
          sdCards: "/gear/best-sd-cards",
          // Other
          deals: "/deals",
      };

// Text translations
const texts = isGerman
    ? {
          searchPlaceholder: "Suche nach 'beste Vlog-Kamera' oder 'Sony A7C'",
          guides: "Ratgeber",
          cameraGuides: "Kamera-Ratgeber",
          advancedGuides: "Fortgeschritten",
          bestBeginners: "Beste f√ºr Einsteiger",
          bestTravel: "Beste Reisekamera",
          bestVlog: "Beste Vlog-Kamera",
          bestBudget: "Beste Budget-Kamera",
          bestHybrid: "Beste Hybrid-Kamera",
          bestFullFrame: "Beste Vollformat Video",
          action360: "Action- & 360-Kameras",
          lenses: "Objektive",
          byMount: "Nach Anschluss",
          sonyMount: "Sony E-Mount",
          canonMount: "Canon RF & RF-S",
          fujiMount: "Fujifilm X-Mount",
          gear: "Zubeh√∂r",
          accessories: "Zubeh√∂r",
          tripods: "Beste Stative",
          bags: "Beste Kamerataschen",
          sdCards: "Beste SD-Karten",
          deals: "Angebote",
          buyingGuides: "Kaufratgeber",
          gearAccessories: "Zubeh√∂r",
          currentDeals: "Aktuelle Angebote",
      }
    : {
          searchPlaceholder: "Try 'best vlog camera' or 'Sony A7C'",
          guides: "Guides",
          cameraGuides: "Camera Guides",
          advancedGuides: "Advanced Guides",
          bestBeginners: "Best for Beginners",
          bestTravel: "Best Travel Camera",
          bestVlog: "Best Vlog Camera",
          bestBudget: "Best Budget Camera",
          bestHybrid: "Best Hybrid Camera",
          bestFullFrame: "Best Full-Frame Video",
          action360: "Action & 360 Cameras",
          lenses: "Lenses",
          byMount: "By Mount",
          sonyMount: "Sony E-Mount",
          canonMount: "Canon RF & RF-S",
          fujiMount: "Fujifilm X-Mount",
          gear: "Gear",
          accessories: "Accessories",
          tripods: "Best Tripods",
          bags: "Best Camera Bags",
          sdCards: "Best SD Cards",
          deals: "Deals",
          buyingGuides: "Buying Guides",
          gearAccessories: "Gear & Accessories",
          currentDeals: "Current Deals",
      };
---

<header class="header-sticky">
    <div class="container">
        <div class="topbar topbar-enhanced">
            <a
                class="brand-link"
                href={links.home}
                aria-label="cameraupick home"
            >
                <img
                    class="brand-logo"
                    src="/assets/images/logo.webp"
                    alt="cameraupick logo"
                    width="28"
                    height="28"
                    loading="eager"
                    decoding="async"
                />
                <span class="brand-logo brand-logo-fallback" aria-hidden="true"
                    >üì∑</span
                >
                <span class="brand-text">cameraupick</span>
            </a>

            <!-- Search Bar -->
            <div class="header-search">
                <input
                    type="search"
                    placeholder={texts.searchPlaceholder}
                    aria-label="Search site"
                />
                <span class="search-icon" aria-hidden="true">üîç</span>
            </div>

            <!-- Desktop Navigation -->
            <nav class="nav-menu" aria-label="Main navigation">
                <!-- Guides Dropdown -->
                <div class="nav-item">
                    <span class="nav-link">
                        {texts.guides}
                        <span class="nav-arrow">‚ñæ</span>
                    </span>
                    <div class="mega-menu">
                        <div class="mega-menu-content">
                            <div class="mega-menu-column">
                                <h4>{texts.cameraGuides}</h4>
                                <ul>
                                    <li>
                                        <a href={links.beginners}
                                            >{texts.bestBeginners}</a
                                        >
                                    </li>
                                    <li>
                                        <a href={links.travel}
                                            >{texts.bestTravel}</a
                                        >
                                    </li>
                                    <li>
                                        <a href={links.vlog}>{texts.bestVlog}</a
                                        >
                                    </li>
                                    <li>
                                        <a href={links.budget}
                                            >{texts.bestBudget}</a
                                        >
                                    </li>
                                </ul>
                            </div>
                            <div class="mega-menu-column">
                                <h4>{texts.advancedGuides}</h4>
                                <ul>
                                    <li>
                                        <a href={links.hybrid}
                                            >{texts.bestHybrid}</a
                                        >
                                    </li>
                                    <li>
                                        <a href={links.fullFrame}
                                            >{texts.bestFullFrame}</a
                                        >
                                    </li>
                                    <li>
                                        <a href={links.action360}
                                            >{texts.action360}</a
                                        >
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lenses Dropdown -->
                <div class="nav-item">
                    <span class="nav-link">
                        {texts.lenses}
                        <span class="nav-arrow">‚ñæ</span>
                    </span>
                    <div class="mega-menu">
                        <div class="mega-menu-content">
                            <div class="mega-menu-column">
                                <h4>{texts.byMount}</h4>
                                <ul>
                                    <li>
                                        <a href={links.sonyLenses}
                                            >{texts.sonyMount}</a
                                        >
                                    </li>
                                    <li>
                                        <a href={links.canonLenses}
                                            >{texts.canonMount}</a
                                        >
                                    </li>
                                    <li>
                                        <a href={links.fujiLenses}
                                            >{texts.fujiMount}</a
                                        >
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gear Dropdown -->
                <div class="nav-item">
                    <span class="nav-link">
                        {texts.gear}
                        <span class="nav-arrow">‚ñæ</span>
                    </span>
                    <div class="mega-menu">
                        <div class="mega-menu-content">
                            <div class="mega-menu-column">
                                <h4>{texts.accessories}</h4>
                                <ul>
                                    <li>
                                        <a href={links.tripods}
                                            >{texts.tripods}</a
                                        >
                                    </li>
                                    <li>
                                        <a href={links.bags}>{texts.bags}</a>
                                    </li>
                                    <li>
                                        <a href={links.sdCards}
                                            >{texts.sdCards}</a
                                        >
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Deals Link (Special) -->
                <a href={links.deals} class="nav-link deals-link"
                    >{texts.deals}</a
                >
            </nav>

            <!-- Language Switcher (Dynamic) -->
            <LanguageSwitcher />

            <!-- Mobile Hamburger -->
            <button
                class="hamburger"
                aria-label="Toggle menu"
                aria-expanded="false"
            >
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div class="mobile-menu">
            <div class="mobile-menu-item">
                <div class="mobile-menu-header">
                    {texts.buyingGuides}
                    <span class="mobile-menu-arrow">+</span>
                </div>
                <div class="mobile-menu-links">
                    <a href={links.beginners}>{texts.bestBeginners}</a>
                    <a href={links.travel}>{texts.bestTravel}</a>
                    <a href={links.vlog}>{texts.bestVlog}</a>
                    <a href={links.budget}>{texts.bestBudget}</a>
                    <a href={links.hybrid}>{texts.bestHybrid}</a>
                    <a href={links.fullFrame}>{texts.bestFullFrame}</a>
                    <a href={links.action360}>{texts.action360}</a>
                </div>
            </div>

            <div class="mobile-menu-item">
                <div class="mobile-menu-header">
                    {texts.lenses}
                    <span class="mobile-menu-arrow">+</span>
                </div>
                <div class="mobile-menu-links">
                    <a href={links.sonyLenses}>{texts.sonyMount}</a>
                    <a href={links.canonLenses}>{texts.canonMount}</a>
                    <a href={links.fujiLenses}>{texts.fujiMount}</a>
                </div>
            </div>

            <div class="mobile-menu-item">
                <div class="mobile-menu-header">
                    {texts.gearAccessories}
                    <span class="mobile-menu-arrow">+</span>
                </div>
                <div class="mobile-menu-links">
                    <a href={links.tripods}>{texts.tripods}</a>
                    <a href={links.bags}>{texts.bags}</a>
                    <a href={links.sdCards}>{texts.sdCards}</a>
                </div>
            </div>

            <div class="mobile-menu-item">
                <a
                    href={links.deals}
                    style="display: block; padding: 1rem; color: var(--accent-strong); font-weight: 700;"
                >
                    {texts.currentDeals}
                </a>
            </div>
        </div>
    </div>
</header>
