const initApp=()=>{console.log('ðŸš€ App Initializing...');const yearSpan=document.getElementById('year');if(yearSpan){yearSpan.textContent=new Date().getFullYear();}const toTopBtn=document.getElementById('toTop');if(toTopBtn){window.addEventListener('scroll',()=>{if(window.scrollY>300){toTopBtn.classList.add('visible');}else{toTopBtn.classList.remove('visible');}});toTopBtn.addEventListener('click',()=>{window.scrollTo({top:0,behavior:'smooth'});});}const startQuizBtn=document.getElementById('start-quiz');const closeQuizBtn=document.getElementById('close-quiz');const quizModal=document.getElementById('quiz-modal');const steps=[ document.getElementById('quiz-step-1'),document.getElementById('quiz-step-2'),document.getElementById('quiz-step-3'),document.getElementById('quiz-result')];const recContent=document.getElementById('recommendation-content');const restartBtn=document.getElementById('restart-quiz');let userAnswers={type:'',exp:'',budget:''};if(startQuizBtn&&quizModal){console.log('âœ… Quiz elements found. Attaching listeners.');startQuizBtn.addEventListener('click',()=>{console.log('ðŸ”˜ Start Quiz clicked');quizModal.style.display='block';startQuizBtn.parentElement.style.display='none';showStep(0);});closeQuizBtn.addEventListener('click',resetQuiz);document.querySelectorAll('#quiz-step-1 .quiz-option').forEach(btn=>{btn.addEventListener('click',()=>{userAnswers.type=btn.getAttribute('data-type');showStep(1);});});document.querySelectorAll('#quiz-step-2 .quiz-option').forEach(btn=>{btn.addEventListener('click',()=>{userAnswers.exp=btn.getAttribute('data-exp');showStep(2);});});document.querySelectorAll('#quiz-step-3 .quiz-option').forEach(btn=>{btn.addEventListener('click',()=>{userAnswers.budget=btn.getAttribute('data-budget');calculateResult();showStep(3);});});if(restartBtn){restartBtn.addEventListener('click',()=>{showStep(0);});}}else{if(document.getElementById('camera-finder')){console.warn('âš ï¸ Quiz elements(start-quiz or quiz-modal)NOT found.');}}function showStep(index){steps.forEach((step,i)=>{if(step)step.style.display=i===index ? 'block':'none';});}function resetQuiz(){quizModal.style.display='none';startQuizBtn.parentElement.style.display='flex';showStep(0);}function calculateResult(){let recommendation={};if(userAnswers.type==='video'){if(userAnswers.budget==='low'){recommendation={name:'Sony ZV-E10',desc:'The undisputed king of budget vlogging.',link:'reviews/sony-zv-e10-review.html'};}else if(userAnswers.budget==='mid'){recommendation={name:'DJI Osmo Pocket 3',desc:'The ultimate portable vlog camera.',link:'reviews/dji-osmo-pocket-3-review.html'};}else{recommendation={name:'Sony ZV-E1',desc:'Full-frame cinema quality in a tiny body.',link:'guides/best-vlog-camera.html'};}}else if(userAnswers.type==='photo'){if(userAnswers.budget==='low'){recommendation={name:'Canon R100',desc:'Super affordable entry into real photography.',link:'guides/best-camera-for-beginners-2026.html'};}else if(userAnswers.budget==='high'){recommendation={name:'Sony A7R V',desc:'The resolution monster for pros.',link:'guides/best-full-frame-for-video.html'};}else{recommendation={name:'Fujifilm X-T5',desc:'Pure photography joy with 40MP details.',link:'reviews/fujifilm-x-t5-review.html'};}}else{if(userAnswers.budget==='low'){recommendation={name:'Canon R50',desc:'Tiny but mighty hybrid for beginners.',link:'guides/best-camera-for-beginners-2026.html'};}else if(userAnswers.exp==='pro'||userAnswers.budget==='high'){recommendation={name:'Sony A7 IV',desc:'The industry standard for do-it-all work.',link:'reviews/sony-a7-iv-review.html'};}else{recommendation={name:'Panasonic S5 II',desc:'Best value full-frame hybrid right now.',link:'reviews/panasonic-s5-ii-review.html'};}}recContent.innerHTML=`<div class="card" style="border:1px solid var(--accent);background:rgba(77,163,255,0.05);"><div class="tag" style="background:var(--accent);color:#0a0f1a;font-weight:700;margin-bottom:12px;display:inline-block;padding:4px 8px;border-radius:4px;font-size:11px;">#1 RECOMMENDATION</div><h3 style="margin-top:0;font-size:24px;">${recommendation.name}</h3><p style="font-size:15px;margin-bottom:16px;color:#c6cbe0;">${recommendation.desc}</p><a href="${recommendation.link}" class="buy-btn" style="width:100%;text-align:center;padding:12px;">View Details&rarr;</a></div>`;}const newsletterForm=document.getElementById('newsletter-form');if(newsletterForm){newsletterForm.addEventListener('submit',(e)=>{e.preventDefault();const email=e.target.querySelector('input[type="email"]').value;const button=e.target.querySelector('button');const originalText=button.textContent;button.textContent='âœ“ Subscribed!';button.style.background='#4ade80';e.target.reset();setTimeout(()=>{button.textContent=originalText;button.style.background='';},3000);console.log('Newsletter subscription:',email);});}document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',function(e){const href=this.getAttribute('href');if(href==='#')return;e.preventDefault();const target=document.querySelector(href);if(target){target.scrollIntoView({behavior:'smooth',block:'start'});}});});const createProgressBar=()=>{const progressHTML=`<div class="reading-progress"><div class="progress-bar"></div></div>`;document.body.insertAdjacentHTML('afterbegin',progressHTML);const progressBar=document.querySelector('.progress-bar');window.addEventListener('scroll',()=>{const winScroll=document.documentElement.scrollTop||document.body.scrollTop;const height=document.documentElement.scrollHeight-document.documentElement.clientHeight;const scrolled=(winScroll/height)*100;progressBar.style.width=scrolled+'%';});};if(document.querySelector('main article')){createProgressBar();}const faqItems=document.querySelectorAll('.faq-item');faqItems.forEach((item,index)=>{const question=item.querySelector('h3,summary');if(!question||item.tagName==='DETAILS')return;const answer=item.querySelector('p');if(!question||!answer)return;const questionText=question.textContent;question.innerHTML=`<button class="faq-toggle" aria-expanded="false"><span>${questionText}</span><span class="faq-icon">+</span></button>`;answer.classList.add('faq-answer');answer.style.maxHeight='0';answer.style.overflow='hidden';const toggleButton=question.querySelector('.faq-toggle');toggleButton.addEventListener('click',()=>{const isActive=toggleButton.classList.contains('active');if(isActive){answer.style.maxHeight='0';toggleButton.classList.remove('active');toggleButton.setAttribute('aria-expanded','false');}else{answer.style.maxHeight=answer.scrollHeight+'px';toggleButton.classList.add('active');toggleButton.setAttribute('aria-expanded','true');}});});const createLightbox=(src,alt)=>{const lightbox=document.createElement('div');lightbox.className='lightbox';lightbox.innerHTML=`<div class="lightbox-content"><img src="${src}" alt="${alt||'Enlarged view'}"><button class="lightbox-close" aria-label="Close lightbox">Ã—</button></div>`;document.body.appendChild(lightbox);document.body.style.overflow='hidden';lightbox.addEventListener('click',(e)=>{if(e.target===lightbox||e.target.classList.contains('lightbox-close')){lightbox.remove();document.body.style.overflow='';}});const handleEscape=(e)=>{if(e.key==='Escape'){lightbox.remove();document.body.style.overflow='';document.removeEventListener('keydown',handleEscape);}};document.addEventListener('keydown',handleEscape);};document.querySelectorAll('.product-image,.card-thumb img,.hero-media img').forEach(img=>{img.style.cursor='zoom-in';img.addEventListener('click',()=>{createLightbox(img.src,img.alt);});});const images=document.querySelectorAll('img[loading="lazy"]');images.forEach(img=>{img.style.opacity='0';img.style.transition='opacity 0.3s ease';const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){img.style.opacity='1';observer.unobserve(img);}});});observer.observe(img);});console.log('âœ… App initialized successfully.');};if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',initApp);}else{initApp();}